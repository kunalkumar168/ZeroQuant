Removing miniconda version 22.11.1-1
Loading miniconda version 22.11.1-1
Using quantization config
{'weight_quantization': {'shared_parameters': {'enabled': True, 'quantizer_kernel': False, 'schedule_offset': 0, 'quantize_groups': 128, 'quantize_verbose': True, 'quantization_type': 'symmetric', 'quantize_weight_in_forward': True, 'rounding': 'nearest', 'fp16_mixed_quantize': {'enabled': False, 'quantize_change_ratio': 0.1}}, 'different_groups': {'wq1': {'params': {'start_bits': 8, 'target_bits': 8, 'quantization_period': 0}, 'modules': ['self_attn', 'fc1', 'fc2']}}}, 'activation_quantization': {'shared_parameters': {'enabled': True, 'quantization_type': 'symmetric', 'range_calibration': 'dynamic', 'schedule_offset': 0}, 'different_groups': {'aq1': {'params': {'bits': 8}, 'modules': ['self_attn', 'fc1', 'fc2']}}}}
Model loaded
dataset loaded
Size before Quantization 662385664
  0%|          | 0/104 [00:00<?, ?it/s]  1%|          | 1/104 [00:01<02:23,  1.39s/it]  2%|▏         | 2/104 [00:02<01:58,  1.16s/it]  3%|▎         | 3/104 [00:03<01:50,  1.09s/it]  4%|▍         | 4/104 [00:04<01:45,  1.06s/it]  5%|▍         | 5/104 [00:05<01:42,  1.04s/it]  6%|▌         | 6/104 [00:06<01:40,  1.03s/it]  7%|▋         | 7/104 [00:07<01:38,  1.02s/it]  8%|▊         | 8/104 [00:08<01:37,  1.02s/it]  9%|▊         | 9/104 [00:09<01:36,  1.01s/it] 10%|▉         | 10/104 [00:10<01:34,  1.01s/it] 11%|█         | 11/104 [00:11<01:33,  1.01s/it] 12%|█▏        | 12/104 [00:12<01:32,  1.01s/it] 12%|█▎        | 13/104 [00:13<01:31,  1.01s/it] 13%|█▎        | 14/104 [00:14<01:30,  1.01s/it] 14%|█▍        | 15/104 [00:15<01:29,  1.01s/it] 15%|█▌        | 16/104 [00:16<01:28,  1.01s/it] 16%|█▋        | 17/104 [00:17<01:27,  1.01s/it] 17%|█▋        | 18/104 [00:18<01:26,  1.01s/it] 18%|█▊        | 19/104 [00:19<01:25,  1.01s/it] 19%|█▉        | 20/104 [00:20<01:25,  1.01s/it] 20%|██        | 21/104 [00:21<01:23,  1.01s/it] 21%|██        | 22/104 [00:22<01:22,  1.01s/it] 22%|██▏       | 23/104 [00:23<01:21,  1.01s/it] 23%|██▎       | 24/104 [00:24<01:20,  1.01s/it] 24%|██▍       | 25/104 [00:25<01:19,  1.01s/it] 25%|██▌       | 26/104 [00:26<01:18,  1.01s/it] 26%|██▌       | 27/104 [00:27<01:17,  1.01s/it] 27%|██▋       | 28/104 [00:28<01:16,  1.01s/it] 28%|██▊       | 29/104 [00:29<01:15,  1.01s/it] 29%|██▉       | 30/104 [00:30<01:14,  1.01s/it] 30%|██▉       | 31/104 [00:31<01:13,  1.01s/it] 31%|███       | 32/104 [00:32<01:12,  1.01s/it] 32%|███▏      | 33/104 [00:33<01:11,  1.01s/it] 33%|███▎      | 34/104 [00:34<01:10,  1.01s/it] 34%|███▎      | 35/104 [00:35<01:09,  1.01s/it] 35%|███▍      | 36/104 [00:36<01:08,  1.01s/it] 36%|███▌      | 37/104 [00:37<01:07,  1.01s/it] 37%|███▋      | 38/104 [00:38<01:06,  1.01s/it] 38%|███▊      | 39/104 [00:39<01:05,  1.01s/it] 38%|███▊      | 40/104 [00:40<01:04,  1.01s/it] 39%|███▉      | 41/104 [00:41<01:03,  1.01s/it] 40%|████      | 42/104 [00:42<01:02,  1.01s/it] 41%|████▏     | 43/104 [00:43<01:01,  1.01s/it] 42%|████▏     | 44/104 [00:44<01:00,  1.01s/it] 43%|████▎     | 45/104 [00:45<00:59,  1.01s/it] 44%|████▍     | 46/104 [00:46<00:58,  1.01s/it] 45%|████▌     | 47/104 [00:47<00:57,  1.01s/it] 46%|████▌     | 48/104 [00:48<00:56,  1.01s/it] 47%|████▋     | 49/104 [00:49<00:55,  1.01s/it] 48%|████▊     | 50/104 [00:50<00:54,  1.01s/it] 49%|████▉     | 51/104 [00:51<00:53,  1.01s/it] 50%|█████     | 52/104 [00:52<00:52,  1.01s/it] 51%|█████     | 53/104 [00:53<00:51,  1.01s/it] 52%|█████▏    | 54/104 [00:54<00:50,  1.01s/it] 53%|█████▎    | 55/104 [00:55<00:49,  1.01s/it] 54%|█████▍    | 56/104 [00:56<00:48,  1.01s/it] 55%|█████▍    | 57/104 [00:57<00:47,  1.01s/it] 56%|█████▌    | 58/104 [00:58<00:46,  1.01s/it] 57%|█████▋    | 59/104 [00:59<00:45,  1.01s/it] 58%|█████▊    | 60/104 [01:00<00:44,  1.01s/it] 59%|█████▊    | 61/104 [01:01<00:43,  1.01s/it] 60%|█████▉    | 62/104 [01:02<00:42,  1.01s/it] 61%|██████    | 63/104 [01:03<00:41,  1.01s/it] 62%|██████▏   | 64/104 [01:04<00:40,  1.01s/it] 62%|██████▎   | 65/104 [01:05<00:39,  1.01s/it] 63%|██████▎   | 66/104 [01:07<00:38,  1.01s/it] 64%|██████▍   | 67/104 [01:08<00:37,  1.01s/it] 65%|██████▌   | 68/104 [01:09<00:36,  1.01s/it] 66%|██████▋   | 69/104 [01:10<00:35,  1.01s/it] 67%|██████▋   | 70/104 [01:11<00:34,  1.01s/it] 68%|██████▊   | 71/104 [01:12<00:33,  1.01s/it] 69%|██████▉   | 72/104 [01:13<00:32,  1.01s/it] 70%|███████   | 73/104 [01:14<00:31,  1.01s/it] 71%|███████   | 74/104 [01:15<00:30,  1.01s/it] 72%|███████▏  | 75/104 [01:16<00:29,  1.02s/it] 73%|███████▎  | 76/104 [01:17<00:28,  1.02s/it] 74%|███████▍  | 77/104 [01:18<00:27,  1.02s/it] 75%|███████▌  | 78/104 [01:19<00:26,  1.02s/it] 76%|███████▌  | 79/104 [01:20<00:25,  1.02s/it] 77%|███████▋  | 80/104 [01:21<00:24,  1.01s/it] 78%|███████▊  | 81/104 [01:22<00:23,  1.01s/it] 79%|███████▉  | 82/104 [01:23<00:22,  1.01s/it] 80%|███████▉  | 83/104 [01:24<00:21,  1.01s/it] 81%|████████  | 84/104 [01:25<00:20,  1.01s/it] 82%|████████▏ | 85/104 [01:26<00:19,  1.01s/it] 83%|████████▎ | 86/104 [01:27<00:18,  1.01s/it] 84%|████████▎ | 87/104 [01:28<00:17,  1.01s/it] 85%|████████▍ | 88/104 [01:29<00:16,  1.01s/it] 86%|████████▌ | 89/104 [01:30<00:15,  1.02s/it] 87%|████████▋ | 90/104 [01:31<00:14,  1.02s/it] 88%|████████▊ | 91/104 [01:32<00:13,  1.02s/it] 88%|████████▊ | 92/104 [01:33<00:12,  1.02s/it] 89%|████████▉ | 93/104 [01:34<00:11,  1.02s/it] 90%|█████████ | 94/104 [01:35<00:10,  1.02s/it] 91%|█████████▏| 95/104 [01:36<00:09,  1.01s/it] 92%|█████████▏| 96/104 [01:37<00:08,  1.01s/it] 93%|█████████▎| 97/104 [01:38<00:07,  1.01s/it] 94%|█████████▍| 98/104 [01:39<00:06,  1.01s/it] 95%|█████████▌| 99/104 [01:40<00:05,  1.01s/it] 96%|█████████▌| 100/104 [01:41<00:04,  1.01s/it] 97%|█████████▋| 101/104 [01:42<00:03,  1.01s/it] 98%|█████████▊| 102/104 [01:43<00:02,  1.01s/it] 99%|█████████▉| 103/104 [01:44<00:01,  1.01s/it]100%|██████████| 104/104 [01:44<00:00,  1.23it/s]100%|██████████| 104/104 [01:44<00:00,  1.01s/it]
Perplexity before quantization 54.02797419766415
Size after Quantization 360395776
Compression ratio: 1.8379395878380107
  0%|          | 0/104 [00:00<?, ?it/s]  1%|          | 1/104 [00:01<01:57,  1.14s/it]  2%|▏         | 2/104 [00:02<01:56,  1.15s/it]  3%|▎         | 3/104 [00:03<01:55,  1.15s/it]  4%|▍         | 4/104 [00:04<01:54,  1.15s/it]  5%|▍         | 5/104 [00:05<01:53,  1.15s/it]  6%|▌         | 6/104 [00:06<01:52,  1.15s/it]  7%|▋         | 7/104 [00:08<01:51,  1.15s/it]  8%|▊         | 8/104 [00:09<01:50,  1.15s/it]  9%|▊         | 9/104 [00:10<01:49,  1.15s/it] 10%|▉         | 10/104 [00:11<01:48,  1.15s/it] 11%|█         | 11/104 [00:12<01:46,  1.15s/it] 12%|█▏        | 12/104 [00:13<01:45,  1.15s/it] 12%|█▎        | 13/104 [00:14<01:44,  1.15s/it] 13%|█▎        | 14/104 [00:16<01:43,  1.15s/it] 14%|█▍        | 15/104 [00:17<01:42,  1.15s/it] 15%|█▌        | 16/104 [00:18<01:41,  1.15s/it] 16%|█▋        | 17/104 [00:19<01:40,  1.15s/it] 17%|█▋        | 18/104 [00:20<01:39,  1.15s/it] 18%|█▊        | 19/104 [00:21<01:37,  1.15s/it] 19%|█▉        | 20/104 [00:23<01:36,  1.15s/it] 20%|██        | 21/104 [00:24<01:35,  1.15s/it] 21%|██        | 22/104 [00:25<01:34,  1.15s/it] 22%|██▏       | 23/104 [00:26<01:33,  1.15s/it] 23%|██▎       | 24/104 [00:27<01:32,  1.15s/it] 24%|██▍       | 25/104 [00:28<01:30,  1.15s/it] 25%|██▌       | 26/104 [00:29<01:29,  1.15s/it] 26%|██▌       | 27/104 [00:31<01:28,  1.15s/it] 27%|██▋       | 28/104 [00:32<01:27,  1.15s/it] 28%|██▊       | 29/104 [00:33<01:26,  1.15s/it] 29%|██▉       | 30/104 [00:34<01:25,  1.15s/it] 30%|██▉       | 31/104 [00:35<01:23,  1.15s/it] 31%|███       | 32/104 [00:36<01:22,  1.15s/it] 32%|███▏      | 33/104 [00:37<01:21,  1.15s/it] 33%|███▎      | 34/104 [00:39<01:20,  1.15s/it] 34%|███▎      | 35/104 [00:40<01:19,  1.15s/it] 35%|███▍      | 36/104 [00:41<01:18,  1.15s/it] 36%|███▌      | 37/104 [00:42<01:17,  1.15s/it] 37%|███▋      | 38/104 [00:43<01:16,  1.15s/it] 38%|███▊      | 39/104 [00:44<01:14,  1.15s/it] 38%|███▊      | 40/104 [00:46<01:13,  1.15s/it] 39%|███▉      | 41/104 [00:47<01:12,  1.15s/it] 40%|████      | 42/104 [00:48<01:11,  1.15s/it] 41%|████▏     | 43/104 [00:49<01:10,  1.15s/it] 42%|████▏     | 44/104 [00:50<01:09,  1.15s/it] 43%|████▎     | 45/104 [00:51<01:07,  1.15s/it] 44%|████▍     | 46/104 [00:52<01:06,  1.15s/it] 45%|████▌     | 47/104 [00:54<01:05,  1.15s/it] 46%|████▌     | 48/104 [00:55<01:04,  1.15s/it] 47%|████▋     | 49/104 [00:56<01:03,  1.15s/it] 48%|████▊     | 50/104 [00:57<01:02,  1.15s/it] 49%|████▉     | 51/104 [00:58<01:00,  1.15s/it] 50%|█████     | 52/104 [00:59<00:59,  1.15s/it] 51%|█████     | 53/104 [01:00<00:58,  1.15s/it] 52%|█████▏    | 54/104 [01:02<00:57,  1.15s/it] 53%|█████▎    | 55/104 [01:03<00:56,  1.15s/it] 54%|█████▍    | 56/104 [01:04<00:55,  1.15s/it] 55%|█████▍    | 57/104 [01:05<00:53,  1.15s/it] 56%|█████▌    | 58/104 [01:06<00:52,  1.15s/it] 57%|█████▋    | 59/104 [01:07<00:51,  1.15s/it] 58%|█████▊    | 60/104 [01:09<00:50,  1.15s/it] 59%|█████▊    | 61/104 [01:10<00:49,  1.15s/it] 60%|█████▉    | 62/104 [01:11<00:48,  1.15s/it] 61%|██████    | 63/104 [01:12<00:47,  1.15s/it] 62%|██████▏   | 64/104 [01:13<00:46,  1.15s/it] 62%|██████▎   | 65/104 [01:14<00:44,  1.15s/it] 63%|██████▎   | 66/104 [01:15<00:43,  1.15s/it] 64%|██████▍   | 67/104 [01:17<00:42,  1.15s/it] 65%|██████▌   | 68/104 [01:18<00:41,  1.15s/it] 66%|██████▋   | 69/104 [01:19<00:40,  1.15s/it] 67%|██████▋   | 70/104 [01:20<00:39,  1.15s/it] 68%|██████▊   | 71/104 [01:21<00:38,  1.15s/it] 69%|██████▉   | 72/104 [01:22<00:36,  1.15s/it] 70%|███████   | 73/104 [01:23<00:35,  1.15s/it] 71%|███████   | 74/104 [01:25<00:34,  1.15s/it] 72%|███████▏  | 75/104 [01:26<00:33,  1.15s/it] 73%|███████▎  | 76/104 [01:27<00:32,  1.15s/it] 74%|███████▍  | 77/104 [01:28<00:31,  1.15s/it] 75%|███████▌  | 78/104 [01:29<00:29,  1.15s/it] 76%|███████▌  | 79/104 [01:30<00:28,  1.15s/it] 77%|███████▋  | 80/104 [01:32<00:27,  1.15s/it] 78%|███████▊  | 81/104 [01:33<00:26,  1.15s/it] 79%|███████▉  | 82/104 [01:34<00:25,  1.15s/it] 80%|███████▉  | 83/104 [01:35<00:24,  1.15s/it] 81%|████████  | 84/104 [01:36<00:22,  1.15s/it] 82%|████████▏ | 85/104 [01:37<00:21,  1.15s/it] 83%|████████▎ | 86/104 [01:38<00:20,  1.15s/it] 84%|████████▎ | 87/104 [01:40<00:19,  1.15s/it] 85%|████████▍ | 88/104 [01:41<00:18,  1.15s/it] 86%|████████▌ | 89/104 [01:42<00:17,  1.15s/it] 87%|████████▋ | 90/104 [01:43<00:16,  1.15s/it] 88%|████████▊ | 91/104 [01:44<00:14,  1.15s/it] 88%|████████▊ | 92/104 [01:45<00:13,  1.15s/it] 89%|████████▉ | 93/104 [01:46<00:12,  1.15s/it] 90%|█████████ | 94/104 [01:48<00:11,  1.15s/it] 91%|█████████▏| 95/104 [01:49<00:10,  1.15s/it] 92%|█████████▏| 96/104 [01:50<00:09,  1.15s/it] 93%|█████████▎| 97/104 [01:51<00:08,  1.15s/it] 94%|█████████▍| 98/104 [01:52<00:06,  1.15s/it] 95%|█████████▌| 99/104 [01:53<00:05,  1.15s/it] 96%|█████████▌| 100/104 [01:55<00:04,  1.15s/it] 97%|█████████▋| 101/104 [01:56<00:03,  1.15s/it] 98%|█████████▊| 102/104 [01:57<00:02,  1.15s/it] 99%|█████████▉| 103/104 [01:58<00:01,  1.15s/it]100%|██████████| 104/104 [01:58<00:00,  1.11it/s]100%|██████████| 104/104 [01:58<00:00,  1.14s/it]
Perplexity after quantization 54.79640278987334
